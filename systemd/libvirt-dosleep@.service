[Unit]
Description=Hibernate, hybrid sleep, or sleep Libvirt domain "%i" before Host sleep.
Before=sleep.target
After=libvirt-guests.service
After=libvirtd.service

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/local/bin/libvirt-dosleep "%i"

[Install]
WantedBy=multi-user.target