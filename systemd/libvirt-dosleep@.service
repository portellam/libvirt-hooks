[Unit]
Description=Hibernate, hybrid sleep, or sleep Libvirt domain "%i" before Host sleep.
# Requires=virt-guest-shutdown.target
Before=sleep.target
# After=libvirt-guests.service
# After=libvirtd.service
# After=virt-guest-shutdown.target

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/local/bin/libvirt-dosleep "%i"

[Install]
WantedBy=multi-user.target